<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Living Things&trade;</title>
<script src="sketch.js"></script>
<style>

  html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
  }

  object {
    display: block;
    padding: 0;
    margin: 0;
    width: 100%;
    height: 100%;
    transform-origin: center;
  }

</style>

</head>
<body>
  <object id="svg_object" type="image/svg+xml"></object>

  <script>

    const list = [
      ['living-things-intro00.svg','',''],
      ['four-panel.svg','',''],
      ['three-panel.svg','',''],
      ['sunday-panel.svg','',''],
      ['pop-house.svg','','']
    ];

    let index = 0;

    const obj = document.getElementById('svg_object');

    const swap = v => {
      index = (index + v + list.length) % list.length;
      obj.data = list[index][0];
    };

    obj.addEventListener('load', () => {
      obj.contentDocument.querySelectorAll('path[data-sketch]')
      .forEach(path => {
        const shirt = sketch.svg(obj, {options: {
          hachureAngle: -60,
          hachureGap: 8,
          fillWeight: 4, 
          roughness: 3.2,
          stroke: 'none'
        }});
        const vals = JSON.parse(path.dataset.sketch);
        //vals.fill = window.getComputedStyle(path).getPropertyValue('fill');
        const oldD = path.getAttribute('d');
        const newG = shirt.path(oldD, vals);
        newG.setAttribute('id', path.id);
        const parent = path.parentNode;
        parent.replaceChild(newG, path);

      });
      obj.contentDocument.addEventListener('click', e => {
        //obj.style.setProperty('transform', '');
        swap(1);
      });
    });

    swap(0);

  </script>
</body>